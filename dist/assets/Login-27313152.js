import{_ as h,u as v,a as w,r as V,b as k,c as n,o as S,d as y,e as d,f as s,w as t,g as I,p as x,h as U,i as q}from"./index-23f1c135.js";const B=a=>(x("data-v-565bdd52"),a=a(),U(),a),C={class:"login-body"},L={class:"login-container"},N=B(()=>d("div",{class:"head"},[d("span",{id:"title"},"在线阅卷系统")],-1)),R={__name:"Login",setup(a){const p=v(),i=r=>p.commit("saveUsername",{name:r}),_=w(),u=V(null),e=k({form:{username:"",password:""},rules:{username:[{required:!0,message:"账户不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}),f=()=>{u.value.validate(r=>{if(r)console.log("submit!"),q.post("token/",{username:e.form.username,password:e.form.password}).then(o=>{console.log(o),localStorage.setItem("access_token",o.data.access),localStorage.setItem("refresh_token",o.data.refresh),i(e.form.username),sessionStorage.setItem("username",e.form.username),_.push({path:"/home"})});else return console.log("error submit!"),!1})};return(r,o)=>{const c=n("el-input"),l=n("el-form-item"),g=n("el-button"),b=n("el-form");return S(),y("div",C,[d("div",L,[N,s(b,{"label-position":"top",model:e.form,rules:e.rules,class:"form",ref_key:"formRef",ref:u,"hide-required-asterisk":""},{default:t(()=>[s(l,{label:"账号",prop:"username"},{default:t(()=>[s(c,{modelValue:e.form.username,"onUpdate:modelValue":o[0]||(o[0]=m=>e.form.username=m)},null,8,["modelValue"])]),_:1}),s(l,{label:"密码",prop:"password"},{default:t(()=>[s(c,{modelValue:e.form.password,"onUpdate:modelValue":o[1]||(o[1]=m=>e.form.password=m),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),s(l,{class:"button-item"},{default:t(()=>[s(g,{type:"primary",onClick:f,size:"large"},{default:t(()=>[I("立即登录")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}},E=h(R,[["__scopeId","data-v-565bdd52"]]);export{E as default};
