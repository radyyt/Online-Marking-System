import{_ as q,u as I,b as w,k as f,r as N,i as v,c as r,o as d,d as _,f as u,w as o,e as U,g,F as b,j as x,s as V,l as S,v as j}from"./index-23f1c135.js";const h={class:"dialog-footer"},z={__name:"SelectExam",setup(D,{expose:y}){const m=I(),l=w({info:[],selectedSubject:void 0,selectedTitle:""}),p=f(()=>l.info.filter(a=>a.subject==l.selectedSubject)),n=N(!1);y({handleDialog:()=>{n.value=!0}}),v.get("exam/").then(a=>{l.info=a.data});const E=m.state.subjects,k=f(()=>m.state.selected),T=a=>{m.commit("saveSelectedExamId",a)},B=()=>{const a=p.value.find(s=>s.title===l.selectedTitle).id,t=k.value.map(({type:s,url:c,id:i})=>({type:s,question_url:c,exam:a,question_id:i}));v.post("exam-question/",t).then(()=>{j({message:"已提交至试卷:"+l.selectedTitle,type:"success"})},()=>{j({message:"提交至试卷失败",type:"error"})}),T(a),n.value=!1};return(a,t)=>{const s=r("el-option"),c=r("el-select"),i=r("el-button"),C=r("el-dialog");return d(),_("div",null,[u(C,{modelValue:n.value,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value=e),title:"选择试卷",width:"30%","align-center":""},{footer:o(()=>[U("span",h,[u(i,{onClick:t[3]||(t[3]=e=>n.value=!1)},{default:o(()=>[g("取消")]),_:1}),u(i,{type:"primary",onClick:B},{default:o(()=>[g(" 确定 ")]),_:1})])]),default:o(()=>[u(c,{modelValue:l.selectedSubject,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedSubject=e),placeholder:"请选择科目",style:{"margin-right":"20px"},size:"large",onChange:t[1]||(t[1]=e=>l.selectedTitle="")},{default:o(()=>[(d(!0),_(b,null,x(V(E),e=>(d(),S(s,{label:e.label,value:e.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"]),u(c,{modelValue:l.selectedTitle,"onUpdate:modelValue":t[2]||(t[2]=e=>l.selectedTitle=e),placeholder:"请选择试卷",size:"large"},{default:o(()=>[(d(!0),_(b,null,x(V(p),e=>(d(),S(s,{key:e.id,label:e.title,value:e.title},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}},L=q(z,[["__scopeId","data-v-693aa6ec"]]);export{L as S};
